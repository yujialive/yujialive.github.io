---
layout: post
title: TestNG 学习
categories: testing
tags: 
- testng
---

## TestNG

{% highlight java %}

ITestResult it = Reporter.getCurrentTestResult();
System.out.println(it.getTestClass()); 

ITestResult it = Reporter.getCurrentTestResult(); 
System.out.println(it.getName());

java -cp "C:\TestNG_WORKSPACE" org.testng.TestNG testng.xml

java -classpath testng.jar;%CLASSPATH% org.testng.TestNG -d test-outputs testng.xml
java -classpath testng.jar;%CLASSPATH% org.testng.TestNG -d test-outputs test-outputs\testng-failed.xml

public class MyReporter implements IReporter
public class MyTestListener extends TestListenerAdapter

Reporter.log()

{% endhighlight %}

## Python
嘎嘎是个巴萨嘎嘎 好玩

{% highlight python %}

import utils
import subprocess
import re
import os
import logging
import logging.config
import time
import traceback
logger = logging.getLogger()

def killADB():
    if utils.isWindows():
        try:
            result1 = utils.command_timeout('taskkill /f /im adb.exe', 9)
            result2 = utils.command_timeout('taskkill /f /im acb.exe', 9)
        except:
            logger.info()
            logger.error(traceback.format_exc())
            traceback.print_exc()

    return (result1, result2)


def adb_isconnect():
    try:
        adb_devices = subprocess.Popen('adb get-state', stdout=subprocess.PIPE)
        if adb_devices.stdout.readline().find('device') != -1:
            return 0
        acb_devices = subprocess.Popen('acb get-state', stdout=subprocess.PIPE)
        if acb_devices.stdout.readline().find('device') != -1:
            return 1
    except:
        return -1


def connect_to_adb():
    for i in range(3):
        kill_server('adb')
        start_server('adb')
        if adb_isconnect() == 0:
            return 'adb'

    for i in range(3):
        kill_server('acb')
        start_server('acb')
        if adb_isconnect() == 1:
            return 'acb'

    return ''

{% endhighlight %}

## 嘎嘎噶啊嘎嘎噶

    def kill_server(adbType, timeout = 5):
        logger.info(utils.command_timeout(adbType + ' kill-server', timeout))
        time.sleep(2)


    def start_server(adbType, timeout = 10):
        logger.info(utils.command_timeout(adbType + ' start-server', timeout))
        time.sleep(2)
